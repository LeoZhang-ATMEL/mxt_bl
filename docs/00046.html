<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Frameset//EN">
<html>
<head>
<title>Running The Application</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="generator" content="Doc-O-Matic" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <link rel="STYLESHEET" href="default.css" type="text/css" />

<script type="text/javascript" src="scripts.js"></script>
</head>
<body class="Element700" onload="onBodyLoadEx('frames.html', 'topic', '00046.html');" onmousedown="onBodyMouseDown();">

<!-- Begin Popups -->

<!-- End Popups -->

<!-- Begin Page Header -->
<div class="Element710" id="areafixed">
<div class="Element94">
<a href="00002.html" target="topic">Bootloader Library Help</a> &gt; <a href="00004.html" target="topic">I2C Bootloader</a> &gt; <a href="00006.html" target="topic">Applications Help</a> &gt; I2C Fail Safe Bootloader &gt; <a href="00042.html" target="topic">bootloader</a> &gt; <a href="00046.html" target="topic">Running The Application</a></div>
<div class="Element92">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="25%">
<div class="Element1">
MPLAB Harmony Bootloader Help</div>
</td><td width="25%">
<div class="Element2">
<a href="contents.html" target="tocidx">Contents</a> | <a href="00002.html" target="topic">Home</a></div>
</td><td width="25%">
<div class="Element90">
<a href="00044.html" target="topic">Previous</a> | <a href="00042.html" target="topic">Up</a> | <a href="00047.html" target="topic">Next</a></div>
</td><td width="25%">
<div class="Element96">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: I2C Fail Safe Bootloader bootloader Running The Application Topic Title: Running The Application)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com" target="_blank">Microchip Support</a></div>
</td></tr></table><div class="Element5">
Running The Application</div>
</div>
</div>

<!-- End Page Header -->

<!-- Begin Client Area -->
<div class="Element720" id="areascroll">
<div class="Element721">

<!-- Begin Page Content -->
<a name="PageContent"></a><div class="Element58">
<a name="4465736372697074696F6E"></a><div class="Element11">
<div class="Element10">

<ol class="Element630">
<li value="1" class="Element600">Connect a micro USB cable to the DEBUG port.</li>
<li value="2" class="Element600">Build and program the I2C fail safe bootloader application using the MPLAB X IDE.</li>
<li value="3" class="Element600">Press and hold the User Switch as mentioned in below table and then press Reset button or Power cycle the device to force trigger bootloader at startup. The User LED will be turned on to indicate that the bootloader code is running.
<ul class="Element631">
<li class="Element601"><strong>Note: </strong>The User LED will also turn on when the bootloader does not find a valid application; i.e. the first word of the application (stack pointer), contains 0xFFFFFFFF.</li>
</ul></li>
</ol><p class="Element10">
&nbsp;</p>
<div class="Element63">
<div class="TableDiv">
<table cellspacing="0" class="Table1">
<tr>
<td class="Element65" valign="top" width="63%">
<div class="Element66">
Kit Name&nbsp;</div></td><td class="Element65" valign="top" width="20%">
<div class="Element66">
Switch Name&nbsp;</div></td><td class="Element65" valign="top" width="17%">
<div class="Element66">
LED Name&nbsp;</div></td></tr><tr>
<td class="Element67" valign="top" width="63%">
<div class="Element68">
SAM E54 Xplained Pro Evaluation Kit&nbsp;</div></td><td class="Element67" valign="top" width="20%">
<div class="Element68">
SW0&nbsp;</div></td><td class="Element67" valign="top" width="17%">
<div class="Element68">
LED0&nbsp;</div></td></tr></table></div></div>
<p class="Element10">
&nbsp;</p>

<ol class="Element630">
<li value="4" class="Element600">To program the user application, an embedded application example is provided at the below given path. Refer the host application's help for the next steps.</li>
</ol><div class="Element63">
<div class="TableDiv">
<table cellspacing="0" class="Table1">
<tr>
<td class="Element65" valign="top" width="60%">
<div class="Element66">
I2C Bootloader Host (embedded) Applications&nbsp;</div></td><td class="Element65" valign="top" width="40%">
<div class="Element66">
Help&nbsp;</div></td></tr><tr>
<td class="Element67" valign="top" width="60%">
<div class="Element68">
bootloader/apps/i2c_fail_safe_bootloader/bootloader_host_nvm/firmware&nbsp;</div></td><td class="Element67" valign="top" width="40%">
<div class="Element68">
<a href="00047.html" target="topic">bootloader_host_nvm</a>&nbsp;</div></td></tr></table></div></div>
<p class="Element10">
&nbsp;</p>
<p class="Element10">
Following steps are required only when the bootloader along with the application is being updated. Follow the below steps to generate a combined bootloader and application binary.&nbsp;</p>
<p class="Element10">
&nbsp;</p>
<ol class="Element630">
<li value="5" class="Element600">Launch MHC for the I2C fail safe bootloader application
<ul class="Element631">
<li class="Element601"><strong>Disable Fuse Settings </strong>and regenerate the project</li>
<li class="Element601">Enable <strong>Execute this line After Build</strong> option in MPLAB X Project properties-&gt;Building option</li>
</ul></li>
</ol><p class="Element10" style="text-align: center;">
<img src="fail_safe_bootloader_system_config.png" border="0" alt="" title="">&nbsp;</p>
<p class="Element10" style="text-align: center;">
<img src="fail_safe_bootloader_building_option.png" border="0" alt="" title="">&nbsp;</p>
<p class="Element10" style="text-align: center;">
&nbsp;</p>

<ol class="Element630">
<li value="6" class="Element600">Build the bootloader application again using MPLAB X IDE
<ul class="Element631">
<li class="Element601">This is required to generate the binary file for bootloader application</li>
</ul></li>
<li value="7" class="Element600">Generate the application binary - Build the sample application <a href="00052.html" target="topic">test_app</a> (or any other application having followed the steps provided under <a href="00005.html" target="topic">I2C Bootloader Application Configurations</a>) using MPLAB X IDE. <strong>Do not program.</strong></li>
<li value="8" class="Element600">Run the <strong>btl_app_merge_bin.py</strong> from command prompt to merge the generated Bootloader binary and application binary. Below output should be displayed on command prompt.</li>
</ol><p class="Element10">
&nbsp;</p>
<div class="Element13"><div class="Element12"><pre class="Element12">python &lt;harmony3_path&gt;\bootloader\tools\btl_app_merge_bin.py -o &lt;Offset&gt; -b &lt;harmony3_path&gt;\bootloader\apps\i2c_fail_safe_bootloader\bootloader\firmware\&lt;Project Name&gt;\dist\&lt;Config Name&gt;\production\&lt;Project Name&gt;.production.bin -a &lt;harmony3_path&gt;\bootloader\apps\i2c_fail_safe_bootloader\test_app\firmware\&lt;Project Name&gt;\dist\&lt;Config Name&gt;\production\&lt;Project Name&gt;.production.bin</pre></div></div>
<p class="Element10">
&nbsp;</p>
<p class="Element10">
The following table provides the Details required to run the above command: </p><div class="Element63">
<div class="TableDiv">
<table cellspacing="0" class="Table1">
<tr>
<td class="Element65" valign="top" width="36%">
<div class="Element66">
Kit Name&nbsp;</div></td><td class="Element65" valign="top" width="10%">
<div class="Element66">
Offset&nbsp;</div></td><td class="Element65" valign="top" width="14%">
<div class="Element66">
Device Name&nbsp;</div></td><td class="Element65" valign="top" width="21%">
<div class="Element66">
Project Name&nbsp;</div></td><td class="Element65" valign="top" width="19%">
<div class="Element66">
Config Name&nbsp;</div></td></tr><tr>
<td class="Element67" valign="top" width="36%">
<div class="Element68">
SAM E54 Xplained Pro Evaluation Kit&nbsp;</div></td><td class="Element67" valign="top" width="10%">
<div class="Element68">
0x2000&nbsp;</div></td><td class="Element67" valign="top" width="14%">
<div class="Element68">
same5x&nbsp;</div></td><td class="Element67" valign="top" width="21%">
<div class="Element68">
sam_e54_xpro.X&nbsp;</div></td><td class="Element67" valign="top" width="19%">
<div class="Element68">
sam_e54_xpro&nbsp;</div></td></tr></table></div></div>
<p class="Element10">
&nbsp;</p>
<p class="Element10" style="text-align: center;">
<img src="bootloader_uart_fail_safe_app_merger_console.png" border="0" alt="" title="">&nbsp;</p>
<p class="Element10" style="text-align: center;">
&nbsp;</p>

<ol class="Element630">
<li value="9" class="Element600">Refer to <a href="00051.html" target="topic">Running The Application</a> (from Step 3 onwards) section of <a href="00047.html" target="topic">bootloader_host_nvm</a> for steps required to convert the generated binary into a HEX array and programming the HEX file using the bootloader host application. The merged binary <strong>btl_app_merged.bin </strong>will be generated in the path from where the<strong> btl_app_merge_bin.py</strong> was called from.</li>
</ol></div>
</div>
</div>
<!-- End Page Content -->

<!-- Begin Page Footer -->
<div class="Element95">
<a href="00002.html" target="topic">Bootloader Library Help</a> &gt; <a href="00004.html" target="topic">I2C Bootloader</a> &gt; <a href="00006.html" target="topic">Applications Help</a> &gt; I2C Fail Safe Bootloader &gt; <a href="00042.html" target="topic">bootloader</a> &gt; <a href="00046.html" target="topic">Running The Application</a></div>
<div class="Element93">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="25%">
<div class="Element3">
MPLAB Harmony Bootloader Help</div>
</td><td width="25%">
<div class="Element4">
<a href="contents.html" target="tocidx">Contents</a> | <a href="00002.html" target="topic">Home</a></div>
</td><td width="25%">
<div class="Element91">
<a href="00044.html" target="topic">Previous</a> | <a href="00042.html" target="topic">Up</a> | <a href="00047.html" target="topic">Next</a></div>
</td><td width="25%">
<div class="Element97">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: I2C Fail Safe Bootloader bootloader Running The Application Topic Title: Running The Application)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com" target="_blank">Microchip Support</a></div>
</td></tr></table></div>

<!-- End Page Footer -->
</div>
</div>

<!-- End Client Area -->
</body></html>